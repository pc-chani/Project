<div class="content">
    <h1>היי {{currentUser.FirstName}} , הגמחים שלך:</h1>
    <h1>מכאן תוכל\י לנהל אותם בקלות</h1>
    <div>
        <table *ngFor="let g of myGmhim" class="table table-hover">
            <tbody>
                <tr >
                    <td (click)="edit(g)">{{g.GmhName}} </td>
                    <td>{{g.Adress}}</td>
                    <td>{{g.Phone}}</td>
                    <td>{{g.e_mail}}</td>
                    <td>{{g.commits}}</td>
                    <td class="img"><img src="assets\a.png" (click)="delete(g)">
                        <span class="text">מחק גמח </span>
                    </td>
                    <td class="img"><img src="assets\editt.png" (click)="edit(g)">
                        <span class="text">ערוך פרטי גמח</span>
                    </td>
                    <td><input type="button" value='ניהול הגמ"ח' [routerLink]="['/one-gmh',g.GmhCode]"></td>
                </tr>
                <tr *ngIf="open && g==currentgmh">פרטי הגמח:<img src="assets\close.png" (click)="close()">
                    <div>
                        <form [formGroup]="editGmhForm">
                            <p>הגמח :<input type="text" formControlName="GmhhName"></p>
                            <p>טלפון:<input type="text" formControlName="Phone"></p>
                            <p>אימיל:<input type="text" formControlName="E_mail"></p>
                            <p>כתובת:
                                <input ngx-google-places-autocomplete #placesRef="ngx-places" formControlName="Adress"
                                    (onAddressChange)="handleDestinationChange($event)" class="form-control">‏
                            </p>
                            <!--<p>שם:<input type="text" formControlName="Phone"> <input type="text"
                                   ></p>להחליף לשם אחד?-->
                            <p>הערות:<input type="text" formControlName="Comments"></p>
                            <p><input type="button" class="btn btn-primary" value="שמור שינויים" (click)="saveChange()">
                            </p>
                        </form>
                    </div>
                </tr>
            </tbody>
        </table>
        <img src="assets\add.png" (click)="new()">
        <form [formGroup]="gmhForm" *ngIf="newgmh">
            <div class="form-group"><img src="assets\close.png" (click)="closeNew()">
                <label> שם:</label>
                <input class="txt" type="text" class="form-control" formControlName="GmhName">
                <div class="error" *ngIf="gmhForm.controls['GmhName'].errors!=null">*</div>
            </div>
            <div class="form-group">
                <label> קטגוריה:</label>
                <input type="radio" name="rad" #r1 [checked]="true" (click)="choosecategory()">
                <input type="text" placeholder="בחר "  aria-label="Number" matInput
                    formControlName="category" [matAutocomplete]="auto" [value]="displayFn">
                <mat-autocomplete matAutocomplete #auto="matAutocomplete" [displayWith]="displayFn"
                    (optionSelected)="getTatCategoriesForGmh($event)">
                    <mat-option *ngFor="let c of filteredCategories | async" [value]="c">
                        {{c.CategoryName}}
                    </mat-option>
                </mat-autocomplete>

                <div class="error" *ngIf="gmhForm.controls['tatCategory'].errors!=null">*</div>
                <input type="radio" name="rad" #r2 (click)="newcategory()"> <input type="text" placeholder="הוסף קטגוריה"
                    formControlName="newCategory">
            </div>
            <div class="form-group">
                <label> תת קטגוריה:</label>
                <input type="radio" name="ra" #r3 [checked]="true" (click)="choosetatcategory()">
                <input type="text" placeholder="בחר " aria-label="Number" matInput [matAutocomplete]="auto1"
                    [value]="displayFn" formControlName="tatCategory">
                <mat-autocomplete matAutocomplete #auto1="matAutocomplete" [displayWith]="displayFn">
                    <mat-option *ngFor="let tc of filteredTatCategories | async" [value]="tc">
                        {{tc.CategoryName}}
                    </mat-option>
                </mat-autocomplete>
                <input type="radio" name="ra" #r4 (click)="newtatcategory()"> <input type="text" placeholder="הוסף קטגוריה"
                    formControlName="newTatCategory" [checked]="true">
            </div>
            <div class="form-group">
                <label> הערות:</label>
                <input class="txt" type="text" class="form-control" formControlName="comments">
                <div class="error" *ngIf="gmhForm.controls['comments'].errors!=null">*</div>
            </div>
            <div>
                <input type="button" class="btn btn-success" value="הוסף" (click)="setCategoty()"
                    [disabled]="!gmhForm.valid" style="margin-right: 35%;">
            </div>
        </form>
        <!-- <td><input type="button" class="btn btn-primary" value="שמור שינויים"></td>-->
    </div>
</div>